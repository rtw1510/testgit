<?xml version="1.0" encoding="UTF-8"?>
<validators>
	<validator id="30078972.0.0" classType="org.pbccrc.archive.collect.messagetools.ntrcontract.message.ContractAlterRecord">
		<field name="BsSgmt" fbTag="BsSgmt" classType="org.pbccrc.archive.collect.messagetools.ntrcontract.message.segment.BsSgmt">
			<rule id="BsSgmt_NotNull" type="NotNull" errCode="ABD000" fbValue="" />
			<field name="InfRecType" fbTag="InfRecType" classType="java.lang.String">
				<rule id="InfRecType_NotNull" type="NotNull" errCode="ABD000" depExp="BsSgmt_NotNull" />
				<rule id="InfRecType_NotEmpty" type="NotEmpty" errCode="ABE000" depExp="InfRecType_NotNull" />
				<rule id="InfRecType_DataType" type="DataType" errCode="ABE001" depExp="InfRecType_NotEmpty">
					<property name="type" value="N3" />
				</rule>
				<rule id="InfRecType_EqCtxt" type="Equals" errCode="ABR000" fbTag="0000" fbValue="" depExp="InfRecType_NotEmpty">
					<property name="data" value="${$context.REC_TYPE}" />
				</rule>
			</field>
			<field name="ModRecCode" fbTag="ModRecCode" classType="java.lang.String">
				<rule id="ModRecCode_NotNull" type="NotNull" errCode="ABD000" depExp="BsSgmt_NotNull" />
				<rule id="ModRecCode_NotEmpty" type="NotEmpty" errCode="ABE000" depExp="ModRecCode_NotNull" />
				<rule id="ModRecCode_DataType" type="DataType" errCode="ABE001" depExp="ModRecCode_NotEmpty">
					<property name="type" value="AN..60" />
				</rule>
				<!-- 校验前14位与数据机构提供区段码相等 错误码ABE002 -->
				<rule id="ModRecCode_finanOrg" type="FinanOrgan" errCode="ABE002" depExp="ModRecCode_DataType" />
			</field>
			<field name="RptDate" fbTag="RptDate" classType="java.lang.String">
				<rule id="RptDate_NotNull" type="NotNull" errCode="ABD000" depExp="BsSgmt_NotNull" />
				<rule id="RptDate_NotEmpty" type="NotEmpty" errCode="ABE000" depExp="RptDate_NotNull" />
				<rule id="RptDate_DataType" type="DataType" errCode="ABE001" depExp="RptDate_NotEmpty">
					<property name="type" value="Date" />
				</rule>
				<rule id="RptDate_Range" type="DateRange" errCode="ABE008" depExp="RptDate_DataType" />
				<rule id="RptDate_LTfileCreate" type="DateCompare" errCode="ABR001" depExp="RptDate_Range">
					<property name="type" value="date" />
					<property name="endDate" value="${$context.FILE_CREATE_DATE}" />
				</rule>
			</field>
			<field name="MdfcSgmtCode" fbTag="MdfcSgmtCode" classType="java.lang.String">
				<rule id="MdfcSgmtCode_NotNull" type="NotNull" errCode="ABD000" depExp="BsSgmt_NotNull" />
				<rule id="MdfcSgmtCode_NotEmpty" type="NotEmpty" errCode="ABE000" depExp="MdfcSgmtCode_NotNull" />
				<rule id="MdfcSgmtCode_Dict" type="DictManage" errCode="ABE001" depExp="MdfcSgmtCode_NotEmpty">
					<property name="dictKey" value="ContractSgmMark" />
				</rule>
				<rule id="MdfcSgmtCode_B" type="Equals" depExp="MdfcSgmtCode_Dict">
					<property name="data" value="B" />
				</rule>
				<rule id="MdfcSgmtCode_C" type="Equals" depExp="MdfcSgmtCode_Dict">
					<property name="data" value="C" />
				</rule>
				<rule id="MdfcSgmtCode_D" type="Equals" depExp="MdfcSgmtCode_Dict">
					<property name="data" value="D" />
				</rule>
			</field>
		</field>

		<field name="MdfcSgmt" fbTag="MdfcSgmt" classType="org.pbccrc.archive.collect.messagetools.ntrcontract.message.segment.MdfcSgmt">
			<rule id="MdfcSgmt_NotNull" type="NotNull" errCode="ABD000" fbValue="" />
			<field name="CtrctCertRelSgmt" fbTag="CtrctCertRelSgmt"
				classType="org.pbccrc.archive.collect.messagetools.ntrcontract.message.segment.CtrctCertRelSgmt">
				<rule id="CtrctCertRelSgmt_B" type="Null" errCode="BMR101" fbTag="0000" fbValue=""
					depExp="MdfcSgmt_NotNull &amp; MdfcSgmtCode_B" />
				<rule id="CtrctCertRelSgmt_D" type="Null" errCode="BMR101" fbTag="0000" fbValue=""
					depExp="MdfcSgmt_NotNull &amp; MdfcSgmtCode_D" />
				<rule id="CtrctCertRelSgmt_NotNull" type="NotNull" errCode="ABD000" fbValue=""
					depExp="MdfcSgmt_NotNull &amp; MdfcSgmtCode_C" />
				<field name="BrerNm" fbTag="BrerNm" classType="java.lang.String">
					<rule id="BrerNm_NotNull" type="NotNull" errCode="ABD000" depExp="CtrctCertRelSgmt_NotNull" />
					<rule id="BrerNm_NotEmpty" type="NotEmpty" errCode="ABE000" depExp="BrerNm_NotNull" />
					<rule id="BrerNm_DataType" type="DataType" errCode="ABE001" depExp="BrerNm_NotEmpty">
						<property name="type" value="uInt..2" />
					</rule>
				</field>
				<field name="CtrctCertRels" fbTag="0000" classType="java.util.List">
					<rule id="CtrctCertRels_NotNull" type="NotNull" depExp="CtrctCertRelSgmt_NotNull" />
					<rule id="CtrctCertRels_CollectionSize" fbTag="BrerNm" fbValue="${MdfcSgmt.CtrctCertRelSgmt.BrerNm}" type="CollectionSize"
						errCode="ABE010">
						<property name="size" value="${MdfcSgmt.CtrctCertRelSgmt.BrerNm}" />
					</rule>
					<rule id="CtrctCertRels_CollectionRepeat" type="CollectionRepeat" errCode="ABE011" fbTag="BrerNm"
						fbValue="${MdfcSgmt.CtrctCertRelSgmt.BrerNm}" depExp="CtrctCertRels_NotNull">
						<property name="repeat" value="false" />
						<property name="beanClass" value="org.pbccrc.archive.collect.messagetools.ntrcontract.message.segment.CtrctCertRel" />
						<property name="fieldNames" value="BrerType;CertRelIDType;CertRelIDNum" />
					</rule>
					<field name="CtrctCertRel_bean" fbTag="CtrctCertRel"
						classType="org.pbccrc.archive.collect.messagetools.ntrcontract.message.segment.CtrctCertRel">
						<rule id="CtrctCertRel_bean-CertRelIDNum_ntr_Vali" type="NtrCert" errCode="ABE004" fbTag="CertRelIDNum"
							fbValue="${$this.CertRelIDNum}" depExp="CtrctCertRel_bean-CertRelIDType_Ntr_dict">
							<property name="certTypeFeild" value="CertRelIDType"></property>
							<property name="certNumFeild" value="CertRelIDNum" />
						</rule>
						<rule id="CtrctCertRel_bean-CertRelIDNum_leg_Vali" type="LegCert" errCode="ABE004" fbTag="CertRelIDNum"
							fbValue="${$this.CertRelIDNum}" depExp="CtrctCertRel_bean-CertRelIDType_10;20;30">
							<property name="certTypeFeild" value="CertRelIDType"></property>
							<property name="certNumFeild" value="CertRelIDNum" />
						</rule>
						<field name="BrerType" fbTag="BrerType" classType="java.lang.String">
							<rule id="BrerType_NotNull" type="NotNull" errCode="ABD000" scope="local" />
							<rule id="BrerType_NotEmpty" type="NotEmpty" errCode="ABE000" depExp="BrerType_NotNull" scope="local" />
							<rule id="BrerType_DataType" type="Dict" errCode="ABE001" depExp="BrerType_NotEmpty" scope="local">
								<property name="dictKey" value="RltRepymtInfoIdType" />
							</rule>

							<rule id="BrerType_1" type="Equals" depExp="BrerType_NotEmpty" scope="local">
								<property name="data" value="1" />
							</rule>

							<rule id="BrerType_2" type="Equals" depExp="BrerType_NotEmpty" scope="local">
								<property name="data" value="2" />
							</rule>
						</field>
						<field name="CertRelName" fbTag="CertRelName" classType="java.lang.String">
							<rule id="CtrctCertRel_bean-CertRelName_NotNull" type="NotNull" errCode="ABD000" scope="local" />
							<rule id="CtrctCertRel_bean-CertRelName_NotEmpty" type="NotEmpty" errCode="ABE000"
								depExp="CtrctCertRel_bean-CertRelName_NotNull" scope="local" />
							<rule id="CtrctCertRel_bean-ent-CertRelName_DataType" type="DataType" errCode="ABE001"
								depExp="CtrctCertRel_bean-CertRelName_NotEmpty &amp; BrerType_2" scope="local">
								<property name="type" value="ANC..80" />
							</rule>
							<rule id="CtrctCertRel_bean-ntr-CertRelName_DataType" type="DataType" errCode="ABE001"
								depExp="CtrctCertRel_bean-CertRelName_NotEmpty &amp; BrerType_1" scope="local">
								<property name="type" value="ANC..30" />
							</rule>
						</field>
						<field name="CertRelIDType" fbTag="CertRelIDType" classType="java.lang.String">
							<rule id="CtrctCertRel_bean-CertRelIDType_NotNull" type="NotNull" errCode="ABD000" scope="local" />
							<rule id="CtrctCertRel_bean-CertRelIDType_NotEmpty" type="NotEmpty" errCode="ABE000"
								depExp="CtrctCertRel_bean-CertRelIDType_NotNull" scope="local" />
							<rule id="CtrctCertRel_bean-CertRelIDType_Ntr_dict" type="Dict" errCode="BCE002" fbTag="0000" fbValue=""
								depExp="CtrctCertRel_bean-CertRelIDType_NotEmpty &amp; BrerType_1" scope="local">
								<property name="dictKey" value="NtrCertType" />
							</rule>

							<!-- 新添加 :共同授信人身份类别为2-组织机构代码时，身份标识类型只能是10-中证码；20-统一社会信用码；30-组织机构代码 -->
							<rule id="CtrctCertRel_bean-CertRelIDType_10;20;30" type="Contains" errCode="BCE002" fbTag="0000" fbValue="" depExp="CtrctCertRel_bean-CertRelIDType_NotEmpty &amp; BrerType_2" scope="local">
								<property name="dict" value="10;20;30" />
							</rule>

						</field>
						<field name="CertRelIDNum" fbTag="CertRelIDNum" classType="java.lang.String">
							<rule id="CtrctCertRel_bean-CertRelIDNum_NotNull" type="NotNull" errCode="ABD000" scope="local" />
							<rule id="CtrctCertRel_bean-CertRelIDNum_NotEmpty" type="NotEmpty" errCode="ABE000"
								depExp="CtrctCertRel_bean-CertRelIDNum_NotNull" scope="local" />
							<rule id="CtrctCertRel_bean-Ent-CertRelIDNum_DataType" type="DataType"
								errCode="ABE001" depExp="CtrctCertRel_bean-CertRelIDNum_NotEmpty &amp; BrerType_2"
								scope="local">
								<property name="type" value="ANC..40" />
							</rule>
							<rule id="CtrctCertRel_bean-Ntr-CertRelIDNum_DataType" type="DataType"
								errCode="ABE001" depExp="CtrctCertRel_bean-CertRelIDNum_NotEmpty &amp; BrerType_1"
								scope="local">
								<property name="type" value="ANC..20" />
							</rule>

						</field>
					</field>
				</field>
			</field>
			<field name="CtrctBsSgmt" fbTag="CtrctBsSgmt"
				classType="org.pbccrc.archive.collect.messagetools.ntrcontract.message.segment.CtrctBsSgmt">
				<rule id="CtrctBsSgmt_C" type="Null" errCode="BMR101" fbTag="0000" fbValue=""
					depExp="MdfcSgmt_NotNull &amp; MdfcSgmtCode_C" />
				<rule id="CtrctBsSgmt_D" type="Null" errCode="BMR101" fbTag="0000" fbValue=""
					depExp="MdfcSgmt_NotNull &amp; MdfcSgmtCode_D" />
				<rule id="CtrctBsSgmt_NotNull" type="NotNull" errCode="ABD000" fbValue="" depExp="MdfcSgmt_NotNull &amp; MdfcSgmtCode_B" />
				<field name="InfRecType" fbTag="InfRecType" classType="java.lang.String">
					<rule id="BsSgmt_InfRecType_Null" type="Null" errCode="BMR105" fbTag="0000" />
				</field>
				<field name="ContractCode" fbTag="ContractCode" classType="java.lang.String">
					<rule id="ContractCode_Null" type="Null" errCode="BMR105" fbTag="0000" />
				</field>
				<field name="RptDate" fbTag="RptDate" classType="java.lang.String">
					<rule id="CtrctBsSgmt_RptDate_Null" type="Null" errCode="BMR105" fbTag="0000" />
				</field>
				<field name="RptDateCode" fbTag="RptDateCode" classType="java.lang.String">
					<rule id="RptDateCode_Null" type="Null" errCode="BMR105" fbTag="0000" />

				</field>
				<field name="Name" fbTag="Name" classType="java.lang.String">
					<rule id="Name_NotNull" type="NotNull" errCode="ABD000" depExp="CtrctBsSgmt_NotNull" />
					<rule id="Name_NotEmpty" type="NotEmpty" errCode="ABE000" depExp="Name_NotNull" />
					<rule id="Name_DataType" type="DataType" errCode="ABE001" depExp="Name_NotEmpty">
						<property name="type" value="ANC..30" />
					</rule>
				</field>
				<field name="IDType" fbTag="IDType" classType="java.lang.String">
					<rule id="IDType_NotNull" type="NotNull" errCode="ABD000" depExp="CtrctBsSgmt_NotNull" />
					<rule id="IDType_NotEmpty" type="NotEmpty" errCode="ABE000" depExp="IDType_NotNull" />
					<rule id="IDType_Dict" type="Dict" errCode="ABE001" depExp="IDType_NotEmpty">
						<property name="dictKey" value="NtrCertType" />
					</rule>
				</field>
				<field name="IDNum" fbTag="IDNum" classType="java.lang.String">
					<rule id="IDNum_NotNull" type="NotNull" errCode="ABD000" depExp="CtrctBsSgmt_NotNull" />
					<rule id="IDNum_NotEmpty" type="NotEmpty" errCode="ABE000" depExp="IDNum_NotNull" />
					<rule id="IDNum_DataType" type="DataType" errCode="ABE001" depExp="IDNum_NotEmpty">
						<property name="type" value="ANC..20" />
					</rule>
				</field>
				<!-- 校验身份证类型及号码 -->
				<rule id="IDNum_Vali" type="NtrCert" errCode="ABE004" fbTag="IDNum" fbValue="${MdfcSgmt.CtrctBsSgmt.IDNum}"
					depExp="IDType_NotEmpty &amp; IDNum_NotEmpty">
					<property name="certTypeFeild" value="IDType" />
					<property name="certNumFeild" value="IDNum" />
				</rule>
				<field name="MngmtOrgCode" fbTag="MngmtOrgCode" classType="java.lang.String">
					<rule id="MngmtOrgCode_NotNull" type="NotNull" errCode="ABD000" depExp="CtrctBsSgmt_NotNull" />
					<rule id="MngmtOrgCode_NotEmpty" type="NotEmpty" errCode="ABE000" depExp="MngmtOrgCode_NotNull" />
					<rule id="MngmtOrgCode_DataType" type="DataType" errCode="ABE001" depExp="MngmtOrgCode_NotEmpty">
						<property name="type" value="AN14" />
					</rule>
					<rule id="MngmtOrgCode_Organ" type="Organ" errCode="ABE003" depExp="MngmtOrgCode_DataType" />
				</field>
			</field>
			<field name="CreditLimSgmt" fbTag="CreditLimSgmt"
				classType="org.pbccrc.archive.collect.messagetools.ntrcontract.message.segment.CreditLimSgmt">
				<rule id="CreditLimSgmt_B" type="Null" errCode="BMR101" fbTag="0000" fbValue=""
					depExp="MdfcSgmt_NotNull &amp; MdfcSgmtCode_B" />
				<rule id="CreditLimSgmt_C" type="Null" errCode="BMR101" fbTag="0000" fbValue=""
					depExp="MdfcSgmt_NotNull &amp; MdfcSgmtCode_C" />
				<rule id="CreditLimSgmt_NotNull" type="NotNull" errCode="BMR101" fbTag="0000" fbValue=""
					depExp="MdfcSgmt_NotNull &amp; MdfcSgmtCode_D" />
				<field name="CreditLimType" fbTag="CreditLimType" classType="java.lang.String">
					<rule id="CreditLimType_NotNull" type="NotNull" errCode="ABD000" depExp="CreditLimSgmt_NotNull" />
					<rule id="CreditLimType_NotEmpty" type="NotEmpty" errCode="ABE000" depExp="CreditLimType_NotNull" />
					<rule id="CreditLimType_DataType" type="Dict" errCode="ABE001" depExp="CreditLimType_NotEmpty">
						<property name="dictKey" value="CreLimType" />
					</rule>
				</field>
				<field name="CreditLim" fbTag="CreditLim" classType="java.lang.String">
					<rule id="CreditLim_NotNull" type="NotNull" errCode="ABD000" depExp="CreditLimSgmt_NotNull" />
					<rule id="CreditLim_NotEmpty" type="NotEmpty" errCode="ABE000" depExp="CreditLim_NotNull" />
					<rule id="CreditLim_DataType" type="DataType" errCode="ABE001" depExp="CreditLim_NotEmpty">
						<property name="type" value="uInt..15" />
					</rule>
				</field>
				<field name="Cy" fbTag="Cy" classType="java.lang.String">
					<rule id="Cy_NotNull" type="NotNull" errCode="ABD000" depExp="CreditLimSgmt_NotNull" />
					<rule id="Cy_NotEmpty" type="NotEmpty" errCode="ABE000" depExp="Cy_NotNull" />
					<rule id="Cy_Dict" type="Dict" errCode="ABE001" depExp="Cy_NotEmpty">
						<property name="dictKey" value="Cy" />
					</rule>
				</field>
				<field name="LimLoopFlg" fbTag="LimLoopFlg" classType="java.lang.String">
					<rule id="LimLoopFlg_NotNull" type="NotNull" errCode="ABD000" depExp="CreditLimSgmt_NotNull" />
					<rule id="LimLoopFlg_NotEmpty" type="NotEmpty" errCode="ABE000" depExp="LimLoopFlg_NotNull" />
					<rule id="LimLoopFlg_Dict" type="Dict" errCode="ABE001" depExp="LimLoopFlg_NotEmpty">
						<property name="dictKey" value="LimLoopFlg" />
					</rule>
				</field>
				<field name="ConEffDate" fbTag="ConEffDate" classType="java.lang.String">
					<rule id="ConEffDate_NotNull" type="NotNull" errCode="ABD000" depExp="CreditLimSgmt_NotNull" />
					<rule id="ConEffDate_NotEmpty" type="NotEmpty" errCode="ABE000" depExp="ConEffDate_NotNull" />
					<rule id="ConEffDate_DataType" type="DataType" errCode="ABE001" depExp="ConEffDate_NotEmpty">
						<property name="type" value="Date" />
					</rule>
					<rule id="ConEffDate_Range" type="DateRange" errCode="ABE008" depExp="ConEffDate_DataType" />
					<rule id="RptDate_DateCompare" type="DateCompare" errCode="ABE007" depExp="ConEffDate_DataType">
						<property name="type" value="date" />
						<property name="endDate" value="${BsSgmt.RptDate}" />
					</rule>
				</field>
				<field name="ConExpDate" fbTag="ConExpDate" classType="java.lang.String">
					<rule id="ConExpDate_NotNull" type="NotNull" errCode="ABD000" depExp="CreditLimSgmt_NotNull" />
					<rule id="ConExpDate_NotEmpty" type="NotEmpty" errCode="ABE000" depExp="ConExpDate_NotNull" />
					<rule id="ConExpDate_DataType" type="DataType" errCode="ABE001" depExp="ConExpDate_NotEmpty">
						<property name="type" value="Date" />
					</rule>
					<rule id="ConExpDate_Range" type="DateRange" errCode="ABE008" depExp="ConExpDate_DataType" />
					<rule id="ConExpDate_DateCompare" type="DateCompare" errCode="BCE000" fbTag="ConEffDate"
						fbValue="${MdfcSgmt.CreditLimSgmt.ConEffDate}" depExp="ConEffDate_DataType &amp; ConExpDate_DataType">
						<property name="type" value="date" />
						<property name="beginDate" value="${MdfcSgmt.CreditLimSgmt.ConEffDate}" />
					</rule>
				</field>
				<field name="ConStatus" fbTag="ConStatus" classType="java.lang.String">
					<rule id="ConStatus_NotNull" type="NotNull" errCode="ABD000" depExp="CreditLimSgmt_NotNull" />
					<rule id="ConStatus_NotEmpty" type="NotEmpty" errCode="ABE000" depExp="ConStatus_NotNull" />
					<rule id="ConStatus_DataType" type="Dict" errCode="ABE001" depExp="ConStatus_NotEmpty">
						<property name="dictKey" value="ConStatus" />
					</rule>
				</field>
				<field name="CreditRestCode" fbTag="CreditRestCode" classType="java.lang.String">
					<rule id="CreditRestCode_NotNull" type="NotNull" depExp="CreditLimSgmt_NotNull" />
					<rule id="CreditRestCode_Null" type="Null" depExp="CreditLimSgmt_NotNull" />
					<rule id="CreditRestCode_Apear" type="NotNull" errCode="BCE004" fbTag="0000" fbValue="" depExp="CreditRest_NotNull " />
					<rule id="CreditRestCode_NotEmpty" type="NotEmpty" errCode="ABE000" depExp="CreditRestCode_Apear" />
					<rule id="CreditRestCode_DataType" type="DataType" errCode="ABE001" depExp="CreditRestCode_NotEmpty">
						<property name="type" value="AN..60" />
					</rule>
					<!-- 前14为数据提供机构区代码校验 -->
					<rule id="CreditRestCode_FinanVali" type="FinanOrgan" errCode="ABE002" depExp="CreditRestCode_DataType">
					</rule>

				</field>
				<field name="CreditRest" fbTag="CreditRest" classType="java.lang.String">
					<rule id="CreditRest_NotNull" type="NotNull" depExp="CreditLimSgmt_NotNull" />
					<rule id="CreditRest_Null" type="Null" depExp="CreditLimSgmt_NotNull" />
					<rule id="CreditRest_Apear" type="NotNull" errCode="BCE004" fbTag="0000" fbValue="" depExp="CreditRestCode_NotNull" />
					<rule id="CreditRest_NotEmpty" type="NotEmpty" errCode="ABE000" depExp="CreditRest_Apear" />
					<rule id="CreditRest_DataType" type="DataType" errCode="ABE001" depExp="CreditRest_NotEmpty">
						<property name="type" value="uInt..15" />
					</rule>
				</field>
			</field>
		</field>
	</validator>
</validators>
